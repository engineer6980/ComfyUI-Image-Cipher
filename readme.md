# ComfyUI Image Cipher (Invisible Noise)

这是一个用于图像隐私保护的 ComfyUI 自定义节点。它通过 **RGB 通道独立差分位移**算法，将原始图像进行加密，但保持图像尺寸和 PNG 格式不变。

## ✨ 特点 (Features)
- **视觉不可见**：将 R/G/B 通道拆分并进行不同程度的位移，无法识别原图内容。
- **无损还原**：基于像素坐标的纯数学变换，还原后像素 100% 无损。
- **格式兼容**：输入 HxW 图片，输出依然是 HxW 图片，完美适配 VAE 解码后的流程。
- **多端支持**：算法简单，极易在 Python、微信小程序、Web 前端中实现还原。

## 🛠️ 节点说明 (Nodes)

### 1. 🔒 Cipher Encode (RGB Shift)
- **输入**: VAE 解码后的图像 (IMAGE)。
- **输出**: 加密后的彩色噪点图。
- **作用**: 将图片加密，可直接保存为 PNG。

### 2. 🔓 Cipher Decode (Preview)
- **输入**: 加密后的图像。
- **输出**: 还原后的正常图像。
- **作用**: 仅用于在 ComfyUI 内部验证还原效果，或用于调试。

## 💻 前端还原算法 (开发者参考)
本节点使用固定密钥机制（默认 Key 为内部常量）。在前端还原时，请对 R/G/B 通道分别执行反向位移：
- **R 通道位移量**: `(y * KEY * 1) % width`
- **G 通道位移量**: `(y * KEY * 2) % width`
- **B 通道位移量**: `(y * KEY * 3) % width`

*可通过本地使用ComfyUI_RH_APICall节点调用RH上的工作流，最终在本地完成图片输出*